<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sunny Jim Stingey Joke T-Shirts</title>

<style>
body{
    font-family:Arial;
    text-align:center;
    background:#f4f4f4;
    margin:0;
    padding:20px;
}

h1{
    font-family:"Comic Sans MS", cursive;
    font-size:8vw;
    margin-bottom:20px;
}

#baseImage{
    width:60vw;
    max-width:500px;
    margin:20px auto;
    display:block;
}

select{
    padding:12px;
    font-size:18px;
    margin-bottom:20px;
    width:70%;
    max-width:350px;
}

.thumbnail{
    width:28vw;
    max-width:160px;
    margin:10px;
    cursor:pointer;
    border:2px solid #ccc;
}

.thumbnail:hover{
    border-color:#000;
}

.large-preview{
    max-width:85vw;
    margin:auto;
}

.large-preview img{
    width:100%;
    max-width:400px;
    cursor:zoom-in;
    border:2px solid #ccc;
}

button{
    padding:10px 20px;
    margin-top:10px;
    cursor:pointer;
}

.cart-item{
    background:white;
    margin:10px auto;
    padding:10px;
    max-width:400px;
    border-radius:6px;
}

.remove-btn{
    background:#ff4444;
    color:white;
    border:none;
    padding:5px 10px;
    margin-left:10px;
}

#zoomOverlay{
    display:none;
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,.85);
    justify-content:center;
    align-items:center;
    z-index:1000;
}

#zoomOverlay img{
    max-width:90%;
    max-height:90%;
    border:4px solid white;
}

#cartContainer{
    display:none;
    margin-top:20px;
}
</style>
</head>
<body>

<h1>Sunny Jim Stingey Joke T-Shirts</h1>

<!-- Base Sunny Jim image -->
<img id="baseImage" src="sjimstingey.png" style="display:block; margin-bottom:20px;">

<!-- Joke dropdown -->
<select id="jokeSelect" onchange="updateThumbnails()">
<option value="">Select joke</option>
</select>

<!-- Thumbnail and preview containers -->
<div id="thumbnailContainer"></div>
<div class="large-preview" id="largePreview"></div>

<!-- Shopping cart -->
<div id="cartContainer">
<h2>Cart</h2>
<div id="cartDisplay"></div>
</div>

<div id="paypal-button-container"></div>

<!-- Zoom overlay -->
<div id="zoomOverlay" onclick="closeZoom()">
<img id="zoomedImage">
</div>

<script src="https://www.paypal.com/sdk/js?client-id=YOUR_SANDBOX_CLIENT_ID&currency=AUD"></script>

<script>
// =======================
// DESIGN ARRAY
// =======================
const designs = [
    { id:"borrowed_pen", name:"Borrowed a pen", file:"pen" },
    { id:"kids_lunches", name:"Kids lunches", file:"kidslunches" },
    { id:"sliced_bread", name:"Sliced bread", file:"bread" },
    { id:"unlucky_car_horn", name:"Unlucky Car Horn", file:"unlucky_car_horn" },
    { id:"unlucky_box_tits", name:"Unlucky Box of Tits", file:"unlucky_box_tits" }
];

// =======================
// VARIABLES
// =======================
let cart = [];
let nextId = 1;
const shirtPrice = 30;

const shirts = {};
const jokeNames = {};

designs.forEach(d => {
    shirts[d.id] = {
        black: { thumbnail:`${d.file}_black_thumb.png`, large:`${d.file}_black_large.png` },
        white: { thumbnail:`${d.file}_white_thumb.png`, large:`${d.file}_white_large.png` }
    };
    jokeNames[d.id] = d.name;
});

// =======================
// POPULATE DROPDOWN
// =======================
function populateSelector(){
    const select = document.getElementById("jokeSelect");
    designs.forEach(d => {
        const opt = document.createElement("option");
        opt.value = d.id;
        opt.textContent = d.name;
        select.appendChild(opt);
    });
}

// =======================
// SHIPPING
// =======================
function getShipping(){
    const totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
    if(totalQty <= 2) return 12;
    if(totalQty <= 5) return 20;
    return 29;
}

// =======================
// UPDATE THUMBNAILS
// =======================
function updateThumbnails(){
    const joke = document.getElementById("jokeSelect").value;
    const container = document.getElementById("thumbnailContainer");
    container.innerHTML = "";

    const base = document.getElementById("baseImage");

    if(!joke){
        // No joke selected → show base image
        base.style.display = "block";
        document.getElementById("largePreview").innerHTML = "";
        return;
    }

    // Joke selected → hide base image
    base.style.display = "none";

    // Create thumbnails for black and white
    ["black","white"].forEach(color=>{
        const img = document.createElement("img");
        img.src = shirts[joke][color].thumbnail;
        img.className = "thumbnail";
        img.onclick = () => showPreview(joke,color);
        container.appendChild(img);
    });

    // Show first large preview automatically
    showPreview(joke,"black");
}

// =======================
// SHOW PREVIEW
// =======================
function showPreview(joke,color){
    const div = document.getElementById("largePreview");
    div.innerHTML = "";

    const img = document.createElement("img");
    img.src = shirts[joke][color].large;
    img.onclick = () => openZoom(img.src);
    div.appendChild(img);
    div.appendChild(document.createElement("br"));

    // size selector
    const sizeSelect = document.createElement("select");
    ["Small","Medium","Large","XL"].forEach(size=>{
        const opt = document.createElement("option");
        opt.value = size;
        opt.textContent = size;
        sizeSelect.appendChild(opt);
    });
    div.appendChild(sizeSelect);

    // qty selector
    const qtySelect = document.createElement("select");
    for(let i=1;i<=10;i++){
        const opt = document.createElement("option");
        opt.value = i;
        opt.textContent = "Qty "+i;
        qtySelect.appendChild(opt);
    }
    div.appendChild(qtySelect);
    div.appendChild(document.createElement("br"));

    // buttons container
    const btnContainer = document.createElement("div");
    btnContainer.style.display = "flex";
    btnContainer.style.justifyContent = "center";
    btnContainer.style.gap = "10px";
    btnContainer.style.marginTop = "10px";

    // Add to cart
    const addBtn = document.createElement("button");
    addBtn.textContent = "Add to cart";
    addBtn.onclick = ()=>{
        cart.push({
            id: nextId++,
            joke,
            color,
            size: sizeSelect.value,
            qty: parseInt(qtySelect.value),
            price: shirtPrice
        });
        updateCart();
    };
    btnContainer.appendChild(addBtn);

    // View Cart
    const viewBtn = document.createElement("button");
    viewBtn.textContent = "View Cart";
    viewBtn.onclick = scrollToCart;
    btnContainer.appendChild(viewBtn);

    div.appendChild(btnContainer);
}

// =======================
// UPDATE CART
// =======================
function updateCart(){
    const cartContainer = document.getElementById("cartContainer");
    const div = document.getElementById("cartDisplay");
    div.innerHTML = "";

    if(cart.length === 0){ cartContainer.style.display="none"; renderPayPal(); return; }

    cartContainer.style.display = "block";

    let subtotal = 0;
    cart.forEach(item=>{
        const d = document.createElement("div");
        d.className = "cart-item";

        const total = item.price*item.qty;
        subtotal += total;

        const text = document.createElement("span");
        text.textContent = `${item.color} ${jokeNames[item.joke]} ${item.size} x ${item.qty}`;
        d.appendChild(text);

        const remove = document.createElement("button");
        remove.textContent = "Remove";
        remove.className = "remove-btn";
        remove.onclick = ()=>{
            cart = cart.filter(ci=>ci.id!==item.id);
            updateCart();
        };
        d.appendChild(remove);

        const totalSpan = document.createElement("span");
        totalSpan.textContent = ` = $${total}`;
        totalSpan.style.marginLeft="10px";
        d.appendChild(totalSpan);

        div.appendChild(d);
    });

    const shippingCost = getShipping();
    div.innerHTML += `<p>Subtotal $${subtotal}</p><p>Shipping $${shippingCost}</p><h3>Total $${subtotal+shippingCost}</h3>`;
    renderPayPal();
}

// =======================
// PAYPAL
// =======================
function renderPayPal(){
    const container = document.getElementById("paypal-button-container");
    container.innerHTML = "";
    if(cart.length===0) return;

    const subtotal = cart.reduce((sum,i)=>sum+i.price*i.qty,0);
    const total = subtotal + getShipping();

    paypal.Buttons({
        createOrder:(data,actions)=>{ return actions.order.create({purchase_units:[{amount:{value:total.toFixed(2)}}]}); },
        onApprove:(data,actions)=>{ return actions.order.capture().then(()=>{ alert("Payment complete"); cart=[]; updateCart(); }); }
    }).render("#paypal-button-container");
}

// =======================
// ZOOM
// =======================
function openZoom(src){ document.getElementById("zoomOverlay").style.display="flex"; document.getElementById("zoomedImage").src=src; }
function closeZoom(){ document.getElementById("zoomOverlay").style.display="none"; }

// =======================
// SCROLL
// =======================
function scrollToCart(){ document.getElementById("cartContainer").scrollIntoView({behavior:"smooth"}); }

// =======================
// START
// =======================
populateSelector();
updateThumbnails();

</script>

</body>
</html>
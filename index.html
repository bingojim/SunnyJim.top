<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sunny Jim Stingey Joke T-Shirts - Sandbox Test</title>

<style>
body {
    font-family: Arial, sans-serif;
    text-align:center;
    background:#f4f4f4;
    margin:0;
    padding:20px;
}

h1 {
    font-family:"Comic Sans MS", cursive, sans-serif;
    font-size:48px;
    color:#333;
    margin-bottom:10px;
}

#baseImage {
    width:250px;
    margin:20px auto;
    display:block;
    border-radius:8px;
}

#prompt { font-size:18px; margin-bottom:10px; }

select { padding:10px; font-size:16px; margin-bottom:20px; }

.thumbnail-container { margin-top:20px; }

.thumbnail {
    width:150px;
    margin:0 10px;
    cursor:pointer;
    border:2px solid #ccc;
    transition: transform 0.2s, border-color 0.2s;
}

.thumbnail:hover {
    transform: scale(1.05);
    border-color:#888;
}

/* Responsive large preview */
.large-preview {
    max-width:600px;
    margin:20px auto;
}

.large-preview img {
    width:100%;
    height:auto;
    border:2px solid #ccc;
    border-radius:8px;
    cursor:zoom-in;
}

button {
    margin-top:15px;
    padding:12px 24px;
    font-size:16px;
    cursor:pointer;
}

label { font-size:16px; margin-left:10px; }
p { font-size:16px; }

/* Zoom Overlay */
#zoomOverlay {
    display:none;
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.85);
    justify-content:center;
    align-items:center;
    z-index:1000;
    cursor:zoom-out;
}

#zoomOverlay img {
    max-width:90%;
    max-height:90%;
    border:4px solid #fff;
    border-radius:8px;
}
</style>
</head>

<body>

<h1>Sunny Jim Stingey Joke T-Shirts (Sandbox)</h1>

<img id="baseImage" src="sjimstingey.png" alt="Sunny Jim Base Image">

<p id="prompt">Please select your favourite joke:</p>

<select id="jokeSelect" onchange="updateThumbnails()">
    <option value="">-- Select a Joke --</option>
    <option value="pen">Pen Joke</option>
    <option value="lunch">Kids Lunches Joke</option>
    <option value="bread">Never Buy Sliced Bread Joke</option>
</select>

<div class="thumbnail-container" id="thumbnailContainer"></div>
<div class="large-preview" id="largePreview"></div>
<div id="cartDisplay" style="margin-top:30px;"></div>
<div id="paypal-button-container" style="margin-top:20px;"></div>

<!-- Zoom Overlay -->
<div id="zoomOverlay" onclick="closeZoom()">
    <img id="zoomedImage">
</div>

<script src="https://www.paypal.com/sdk/js?client-id=YOUR_SANDBOX_CLIENT_ID&currency=AUD"></script>

<script>
const shipping = 12;
const shirtPrice = 30;
let cart = [];

const shirts = {
    pen: {
        black: { thumbnail: 'pen_black_thumb.png', large: 'pen_black_large.png' },
        white: { thumbnail: 'pen_white_thumb.png', large: 'pen_white_large.png' }
    },
    lunch: {
        black: { thumbnail: 'lunch_black_thumb.png', large: 'lunch_black_large.png' },
        white: { thumbnail: 'lunch_white_thumb.png', large: 'lunch_white_large.png' }
    },
    bread: {
        black: { thumbnail: 'bread_black_thumb.png', large: 'bread_black_large.png' },
        white: { thumbnail: 'bread_white_thumb.png', large: 'bread_white_large.png' }
    }
};

function updateThumbnails() {
    const jokeKey = document.getElementById('jokeSelect').value;
    const container = document.getElementById('thumbnailContainer');
    const baseImg = document.getElementById('baseImage');

    container.innerHTML = '';
    document.getElementById('largePreview').innerHTML = '';

    if (!jokeKey) {
        baseImg.style.display = 'block';
        return;
    }

    baseImg.style.display = 'none';

    ['black','white'].forEach(color => {
        const thumbImg = document.createElement('img');
        thumbImg.src = shirts[jokeKey][color].thumbnail;
        thumbImg.className = 'thumbnail';
        thumbImg.onclick = ()=> showLargePreview(jokeKey,color);
        container.appendChild(thumbImg);
    });

    showLargePreview(jokeKey,'black');
}

function showLargePreview(jokeKey,color){
    const previewDiv = document.getElementById('largePreview');
    previewDiv.innerHTML='';

    const img = document.createElement('img');
    img.src = shirts[jokeKey][color].large;
    img.onclick = ()=> openZoom(img.src);
    previewDiv.appendChild(img);

    const sizeLabel = document.createElement('label');
    sizeLabel.textContent=" Size: ";
    const sizeSelect = document.createElement('select');
    ['Small','Medium','Large','Extra Large'].forEach(s=>{
        const option=document.createElement('option');
        option.value=s.toLowerCase();
        option.textContent=s;
        sizeSelect.appendChild(option);
    });
    sizeLabel.appendChild(sizeSelect);
    previewDiv.appendChild(sizeLabel);

    const pricePara = document.createElement('p');
    pricePara.textContent=`Price: $${shirtPrice}`;
    previewDiv.appendChild(pricePara);

    const button = document.createElement('button');
    button.textContent=`Add ${color.charAt(0).toUpperCase()+color.slice(1)} Shirt to Cart`;
    button.onclick = ()=>{
        cart.push({jokeKey,color,size:sizeSelect.value,price:shirtPrice});
        alert(`Added ${color} ${jokeKey} shirt (${sizeSelect.value}) - $${shirtPrice} to cart`);
        updateCartDisplay();
        renderPayPalButton();
    };
    previewDiv.appendChild(button);

    updateCartDisplay();
}

function updateCartDisplay(){
    const cartDiv=document.getElementById('cartDisplay');
    if(cart.length===0){ cartDiv.innerHTML="<p>Cart is empty.</p>"; return; }
    let subtotal=0;
    let html="<h3>Cart:</h3><ul>";
    cart.forEach(item=>{
        html+=`<li>${item.color} ${item.jokeKey} shirt - ${item.size} ($${item.price})</li>`;
        subtotal+=item.price;
    });
    html+="</ul>";
    html+=`<p>Subtotal: $${subtotal}</p>`;
    html+=`<p>Shipping: $${shipping}</p>`;
    html+=`<p><strong>Total: $${subtotal+shipping}</strong></p>`;
    cartDiv.innerHTML=html;
}

function renderPayPalButton(){
    document.getElementById('paypal-button-container').innerHTML="";
    if(cart.length===0) return;

    paypal.Buttons({
        createOrder:function(data,actions){
            let subtotal = cart.reduce((sum,item)=>sum+item.price,0);
            let total = subtotal + shipping;
            return actions.order.create({
                purchase_units:[{
                    amount:{currency_code:"AUD", value:total.toFixed(2)}
                }]
            });
        },
        onApprove:function(data,actions){
            return actions.order.capture().then(function(details){
                alert(`Transaction completed by ${details.payer.name.given_name}!`);
                cart=[];
                updateCartDisplay();
                renderPayPalButton();
            });
        }
    }).render('#paypal-button-container');
}

/* Zoom Functions */
function openZoom(src){
    const overlay = document.getElementById('zoomOverlay');
    const zoomedImg = document.getElementById('zoomedImage');
    zoomedImg.src = src;
    overlay.style.display = 'flex';
}

function closeZoom(){
    document.getElementById('zoomOverlay').style.display = 'none';
}

document.addEventListener('keydown', function(e){
    if(e.key === "Escape"){
        closeZoom();
    }
});

updateThumbnails();
</script>

</body>
</html>